<!DOCTYPE html>
<html>
  <head>
    <title>Riak Admin GUI v0.0.1</title>
    <link href='screen.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <link rel="icon" type="image/png" href="riaklogo.png">
    <script src='jquery-1.5.1.min.js' type='text/javascript'></script>
    <script src='jquery.tmpl.js' type='text/javascript'></script>
    <script src='jquery.address-1.4.min.js' type='text/javascript'></script>
    <script src='knockout-1.2.1.js' type='text/javascript'></script>
    <script src='knockout.address.js' type='text/javascript'></script>
    <script src='underscore-min.js' type='text/javascript'></script>
    <script src='json2.js' type='text/javascript'></script>
    <script src='control-bindings.js' type='text/javascript'></script>
    <script src='control.js' type='text/javascript'></script>
  </head>
<body>
<div id='container'>
<div id='home'>
  Riak Control <code>0.0.1</code>
</div>
<div id='content'>
<h1></h1>
<div id='main'>
    <!-- main page -->
    <div id="nodes" data-bind="visible: !selectedNode()">
        <div class="node-form">
          <span title="dismiss" class="message" data-bind="fadeVisible: message(), text: message, click: clearMessage"></span>
          <form data-bind="submit: addNode">
              <label>Node to add:</label> <input id="newNode" data-bind="value: newNodeName" placeholder="nodename@host" />
              <button type="submit">Add</button>
          </form>
        </div>
        <table id="cluster">
          <thead>
            <tr data-bind="template: {name: 'nodeHeaderTemplate'}">
           <script type="text/html" id="nodeHeaderTemplate">
            <th class="header">Partition</th>
            {{each(i, node) nodes()}}
                <th class="node header" data-bind="click: select">
                  ${name}
               </th>
                {{/each}}
           </script>
                </tr>
                <tr data-bind="template: {name: 'serviceHeaderTemplate'}">
                   <script type="text/html" id="serviceHeaderTemplate">
                     <th>&nbsp;</th>
                      {{each(i, node) nodes()}}
                      <th class="services">
                         <ul class="services">
                           {{each(k, service) node.services()}}
                             <li>${service.initial}</li>
                           {{/each}}
                         </ul>
                       </th>
                   {{/each}}
                  </script>
                </tr>
             </thead>
            <tbody data-bind="template: {name: 'partitionsTemplate'}">
              <script type="text/html" id="partitionsTemplate">
                  {{each(i, p) partitions()}}
                    <tr>
                      <td>${i}</td>
                       {{each(k, node) nodes()}}
                          <td class="{{if node.name == p.node}}owner{{/if}}">
                            <ul class="vnodes">
                            {{each(l, vnode) p.vnodes}}
                               <li data-bind="visible: vnode.location == node.name" class="${vnode.status}"></li>
                             {{/each}}
                              </ul>
                          </td>
                       {{/each}}
                    </tr>
                 {{/each}}
              </script>
            </tbody>
         </table>
      </div>
     
    <!-- node page -->
    <div class="viewNode" data-bind="template: { name: 'nodeTemplate', data: selectedNode }"></div>
        <script type="text/html" id="nodeTemplate">
            <div class="nodeInfo">
              <a href="#" data-bind="click: deselect">back</a>
              <h1>${name}</h1>
              <a href="#" data-bind="click: remove">remove</a>
           </div>
        </script>
    </div>
</div>
</div>
</body>
</html>
